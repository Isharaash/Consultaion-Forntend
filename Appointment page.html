<!DOCTYPE html>
<html>
<head>
    <title>User Registration</title>
</head>
<body>
    <h1>User Registration</h1>
    <form id="registrationForm">
        <label for="fName">Frist Name:</label>
        <input type="text" id="fName" required><br>

        <label for="mName">Middle Name:</label>
        <input type="text" id="mName" required><br>

        <label for="lNamed">Last name Name:</label>
        <input type="text" id="lNamed" required><br>

        <label for="address">Address:</label>
        <input type="text" id="address" required><br>

        <label for="age">Age:</label>
        <input type="number" id="age" required><br>

        <label for="dateOfBirth">Birthdate:</label>
        <input type="date" id="dob" required><br>

        <label for="sex">Sex:</label>
        <input type="text" id="sex" required><br><br>

        <div id="scrollableTable">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="eventTableBody">
                    <!-- Data will be inserted here dynamically -->
                </tbody>
            </table>
        </div><br><br>

        


        <label for="date">Book Date:</label>
        <input type="date" id="date" required> <br>

        <label for="time">Book Time:</label>
        <input type="time" id="time" required> <br>

        <label for="email">Email:</label>
        <input type="email" id="email" required><br>
       
        <label for="phone">Phone Number:</label>
        <input type="text" id="phone" required><br>
       
        <label for="date">Book number:</label>
        <input type="text" id="schedule" required> <br>

        <button type="submit">Register</button>
    </form>


    <script >
const registrationForm = document.getElementById('registrationForm');

registrationForm.addEventListener('submit', async (event) => {
    event.preventDefault();

    const fName = document.getElementById('fName').value;
    const mName= document.getElementById('mName').value;
    const  lNamed = document.getElementById('lNamed').value;
   const address= document.getElementById('address').value;
    const age = document.getElementById('age').value;
    const dob = document.getElementById('dob').value;
    const sex = document.getElementById('sex').value;
    const date = document.getElementById('date').value;
    const time = document.getElementById('time').value;
   const email = document.getElementById('email').value;
    const phone = document.getElementById('phone').value;
   
   




    try {
                const response = await fetch('http://localhost:8080/api/v1/saveEmployee', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({

                        fName,
                        mName,
                        lNamed,
                        address,
                        age,
                        dob,
                        sex,
                        date,
                        time,
                        email,
                        phone,
                       
    }),
                });

                if (response.ok) {
                    alert('User registered successfully.');
                } else {
                    alert('Error registering user.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while registering user.');
            }
        });
        document.addEventListener("DOMContentLoaded", function () {
    fetch("http://localhost:8080/api/v1/AllSchedulet")
        .then(response => response.json())
        .then(data => {
            const eventTableBody = document.getElementById("eventTableBody");

            if (data.code === "00") {
                data.content.forEach(event => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${event.id}</td>
                        <td>${event.name}</td>
                        <td>${event.date}</td>
                        <td>${event.time}</td>
                       
                    `;
                    eventTableBody.appendChild(row);
                });
            } else {
                console.error("API returned an error message: " + data.message);
            }
        })
        .catch(error => console.error("Error fetching data: " + error));
});
        
    </script>
</body>
</html>
