<!DOCTYPE html>
<html>
<head>
    <title>User Page</title>
</head>
<body>
    <h1>Welcome <span id="name"></span>!</h1>

    <div id="user-section">


        <p>This is the user section.</p>
    </div>
    <!-- User-specific content goes here -->


    
    <script>

document.addEventListener('DOMContentLoaded', function() {
    const token = localStorage.getItem('token');
    
    if (token) {
        const user = parseToken(token);
        
        // Display the user's name
        document.getElementById('username').textContent = user.name;
        
        // Display the user section
        document.getElementById('user-section').style.display = 'block';
    } else {
        // Redirect to login page if token is not present
        window.location.href = 'login.html';
    }
});

// Function to parse the token and get user information
function parseToken(token) {
    const tokenPayload = token.split('.')[1];
    const decodedToken = JSON.parse(atob(tokenPayload));
    return decodedToken;
}

// Simulate sending a POST request to the Spring Boot API
async function sendPostRequestToAPI() {
    const token = localStorage.getItem('token');
    
    if (token) {
        const apiUrl = 'http://localhost:8080/api/v1//login/user'; // Replace with your API URL
        
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                // Add data to send in the request body
            })
        });

        if (response.ok) {
            const responseData = await response.json();
            console.log('API Response:', responseData);
        } else {
            console.error('API Request Failed');
        }
    } else {
        console.error('Token not found');
    }
}

// Call the function to send the POST request
sendPostRequestToAPI();




    </script>
</body>
</html>